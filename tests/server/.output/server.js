import { createRequire as topLevelCreateRequire } from 'module';
            const require = topLevelCreateRequire(import.meta.url);
import{toNodeListener}from"h3";import{listen}from"listhen";import{defineRpc}from"arri";import{a}from"arri-validate";var getStatus_rpc_default=defineRpc({method:"get",params:void 0,response:a.object({message:a.string()}),handler(){return{message:"ok"}}});import{defineRpc as defineRpc2}from"arri";import{a as a3}from"arri-validate";import{faker}from"@faker-js/faker";import{a as a2}from"arri-validate";var Author=a2.object({id:a2.string(),name:a2.string(),bio:a2.nullable(a2.string()),createdAt:a2.timestamp(),updatedAt:a2.timestamp()},{id:"Author"});function getRandomAuthor(data){return{id:data?.id??faker.string.uuid(),name:data?.name??faker.person.fullName(),bio:data?.bio??faker.helpers.arrayElement([null,faker.lorem.paragraph()]),createdAt:data?.createdAt??faker.date.past(),updatedAt:data?.updatedAt??faker.date.recent()}}var PostType=a2.stringEnum(["text","image","video"],{id:"PostType"});var Post=a2.object({id:a2.string(),title:a2.string(),type:PostType,description:a2.nullable(a2.string()),content:a2.string(),tags:a2.array(a2.string()),authorId:a2.string(),author:Author,createdAt:a2.timestamp(),updatedAt:a2.timestamp()},{id:"Post"});function getRandomPost(input){const authorId=input?.authorId??faker.string.uuid();return{id:input?.id??faker.string.uuid(),title:input?.title??faker.lorem.sentence(7),type:input?.type??faker.helpers.arrayElement(["text","image","video"]),description:input?.description??faker.helpers.arrayElement([null,faker.lorem.paragraph()]),content:input?.content??faker.lorem.paragraphs(),tags:input?.tags??[faker.lorem.word(),faker.lorem.word(),faker.lorem.word()],authorId,author:input?.author??getRandomAuthor({id:authorId}),createdAt:input?.createdAt??faker.date.past(),updatedAt:input?.updatedAt??faker.date.recent()}}var getPost_rpc_default=defineRpc2({method:"get",params:a3.object({postId:a3.string()}),response:Post,handler({params}){return getRandomPost({id:params.postId})}});import{defineRpc as defineRpc3}from"arri";import{a as a4}from"arri-validate";var getPosts_rpc_default=defineRpc3({method:"get",params:a4.object({limit:a4.int8(),type:a4.optional(PostType)}),response:a4.object({total:a4.int32(),items:a4.array(Post)}),handler({params}){const items=[];for(let i=0;i<params.limit;i++){items.push(getRandomPost({type:params.type}))}return{total:items.length,items}}});import{defineRpc as defineRpc4}from"arri";import{a as a5}from"arri-validate";var UpdatePostData=a5.partial(a5.pick(Post,["title","description","tags","content"]));var updatePost_rpc_default=defineRpc4({params:a5.object({postId:a5.string(),data:UpdatePostData}),response:Post,handler({params}){return getRandomPost({id:params.postId,title:params.data.title,description:params.data.description,tags:params.data.tags,content:params.data.content})}});var routes=[{id:"getStatus",route:getStatus_rpc_default},{id:"posts.getPost",route:getPost_rpc_default},{id:"posts.getPosts",route:getPosts_rpc_default},{id:"posts.updatePost",route:updatePost_rpc_default}];var routes_default=routes;import{ArriApp,defineError,defineMiddleware}from"arri";import{ArriRouter}from"arri";var router=new ArriRouter;router.rpc({name:"users.SayHello",params:void 0,response:void 0,handler({params}){}});router.route({path:"/users/hello",method:["get","post"],handler(event){return`
        <div>
            <h1>Hello world!!!</h1>
        </div>
        `}});router.route({path:"/images/upload",method:"post",async handler(event){}});var users_default=router;var app=new ArriApp({rpcRoutePrefix:"rpcs",onRequest(event){}});app.use(defineMiddleware(()=>{throw defineError(400)}));app.rpc({name:"example.helloWorld",params:void 0,response:void 0,handler({params}){}});app.use(users_default);var app_default=app;for(const route of routes_default){app_default.rpc({name:route.id,params:route.route.params,response:route.route.response,handler:route.route.handler,postHandler:route.route.postHandler})}void listen(toNodeListener(app_default.h3App),{port:process.env.PORT??2020});
//# sourceMappingURL=server.js.map
